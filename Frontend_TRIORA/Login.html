<!DOCTYPE HTML>
<HTML lang="en">
<HEAD>
<META CHARSET="UTF-8">
<META NAME="viewport" CONTENT="width=device-width, initial-scale=1.0">
<TITLE>
    LOGIN PAGE
</TITLE>
<LINK rel="stylesheet" href="Login.css">
</HEAD>
<BODY>
    <H1 class="a1">WELCOME BACK, USER!</H1><H1 CLASS="a2">LOGIN TO YOUR TRIORA ACCOUNT!</H1>
    <DIV>
    <INPUT required ID="EM" type="email" class="inputa" placeholder="ENTER YOUR REGISTERED EMAIL ID."/>    
    </DIV>
    <DIV>
    <INPUT required ID="PW" type="password" class="inputb" placeholder="ENTER YOUR PASSWORD."/>    
    </DIV>
<BUTTON class="btn1" id="checkemail" autofocus>AUTHENTICATE AND LOGIN</BUTTON>
    <FOOTER>Â© MANASIJ DAS - 2025</FOOTER>
    <SCRIPT>
            const abc = document.getElementById("EM");
const xyz = document.getElementById("checkemail");
xyz.addEventListener("click", function () {
  if (!abc.checkValidity()) {
    alert("YOU ENTERED AN INVALID EMAIL ID. PLEASE ENTER A VALID EMAIL ID.");
  } else {
    alert("THE EMAIL ID ENTERED BY YOU IS " + abc.value);
  }
});
            </SCRIPT>
            <SCRIPT>

    document.getElementById("checkemail").addEventListener("click",async()=>{
        const email=document.getElementById("EM").value.trim();
        const password=document.getElementById("PW").value.trim();
        if(!email || !password)
    {
        alert("PLEASE ENTER AT LEAST EMAIL AND PASSWORD.");
        return;
    }
        try{
            const res=await fetch("http://localhost:4001/user/login",{
                method:"POST",
                headers:{"Content-Type":"application/json"},
                body:JSON.stringify({
                    email:email,
                    password:password
                })
            });
            const data=await res.json();
            if(res.status===200)
            {
            alert(data.message);
            console.log(data);
            window.location.href="Menu.html";
            }
            else
            {
            alert(data.message);
            console.log(data);
            window.location.href="Error_Login.html";
            }
        }
        catch(error){
            console.error("Error : ",error);
            alert("OOPS! THERE WAS AN UNEXPECTED ISSUE LOGGING YOU IN. PLEASE TRY AGAIN WITH VALID CREDENTIALS.");
        }
    });

</SCRIPT>
</BODY>
    </HTML>